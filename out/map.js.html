<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: map.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: map.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";


(g => { var h, a, k, p = "The Google Maps JavaScript API", c = "google", l = "importLibrary", q = "__ib__", m = document, b = window; b = b[c] || (b[c] = {}); var d = b.maps || (b.maps = {}), r = new Set, e = new URLSearchParams, u = () => h || (h = new Promise(async (f, n) => { await (a = m.createElement("script")); e.set("libraries", [...r] + ""); for (k in g) e.set(k.replace(/[A-Z]/g, t => "_" + t[0].toLowerCase()), g[k]); e.set("callback", c + ".maps." + q); a.src = `https://maps.${c}apis.com/maps/api/js?` + e; d[q] = f; a.onerror = () => h = n(Error(p + " could not load.")); a.nonce = m.querySelector("script[nonce]")?.nonce || ""; m.head.append(a) })); d[l] ? console.warn(p + " only loads once. Ignoring:", g) : d[l] = (f, ...n) => r.add(f) &amp;&amp; u().then(() => d[l](f, ...n)) })({
  key: "AIzaSyAa59LvSdJNTjoYCyqP1q-fHVaj_LksexM",
  v: "weekly",
  loading: "async",
  language: "sv",
  region: "SE",
});

let lat = 59.9208594;
let long = 16.606327999999962;
let city = "Sala";
let map;
let marker;

/**funktion från google maps som hämtar in karta 
 * @function initMap
*/

async function initMap() {
  const { Map } = await google.maps.importLibrary("maps");
  const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");

  map = new Map(document.getElementById("map"), {
    center: { lat: lat, lng: long },
    zoom: 10,
    mapId: "DEMO_MAP_ID",
  });
  marker = new AdvancedMarkerElement({
    map: map,
    position: { lat: lat, lng: long },
    title: city,
  });
}

initMap();

let searchBtnEl = document.getElementById("searchBtn");

searchBtnEl.addEventListener("click", getPosition);

/**funktion som läser in värdet från ett inputfält och söker i API med hjälp av detta värde,
 * väljer ut det första svaret och kör sedan funktionen updateMarker för att flytta markören
 */

async function getPosition() {
  let searchPhrase = document.querySelector("#searchingMap").value;

  let url = `https://nominatim.openstreetmap.org/search?format=json&amp;q=${searchPhrase}`;
  try {
    const response = await fetch(url);
    if (!response.ok) {
      throw new Error("Fel vid anslutning...");
    }
    let places = await response.json();
    let place = places.slice(0, 1);
    updateMarker(place);
  } catch (error) {
    console.error(error);
  }

}

/**funktion som flyttar runt markören på kartan
 * @param {*} place 
 */

async function updateMarker(place) {

  lat = parseFloat(place[0].lat);
  long = parseFloat(place[0].lon);
  city = place[0].name;

  marker.position = { lat: lat, lng: long };
  marker.title = city;

  map.setCenter({ lat: lat, lng: long });
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#displayCourses">displayCourses</a></li><li><a href="global.html#filterCourses">filterCourses</a></li><li><a href="global.html#filterProgrammes">filterProgrammes</a></li><li><a href="global.html#getPosition">getPosition</a></li><li><a href="global.html#initMap">initMap</a></li><li><a href="global.html#loadDiagramData">loadDiagramData</a></li><li><a href="global.html#updateMarker">updateMarker</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Mon Mar 03 2025 16:24:42 GMT+0100 (centraleuropeisk normaltid)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
